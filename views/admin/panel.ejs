<!doctype html>
<html lang="en">

<!-- Mirrored from themeforesight.netlify.app/index-ecommerce.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 01 Jul 2023 05:39:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Zokso admin | Dashboard</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="shortcut icon" href="/img/favicon.ico">

  <!-- Theme styles -->
  <link rel="stylesheet" type="text/css" href="/css/theme.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" type="text/css" href="../cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Vendor -->
  <link rel="stylesheet" type="text/css" href="/css/vendor.min.css">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JJNV6J8RHQ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-JJNV6J8RHQ');
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <nav class="navbar navbar-vertical navbar-expand-lg navbar-light bg-white" role="navigation">
    <div class="container-fluid">
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse">
        <span class="navbar-toggler-icon"></span>
      </button>

      <a class="navbar-brand" href="/admin">
        Admin panel
      </a>

      <div class="dropdown d-flex d-lg-none">
        <a href="#" data-bs-toggle="dropdown">
          <span class="avatar">
            <img src="/img/uifaces/9.jpg" class="avatar-image rounded-circle" alt="">
          </span>
        </a>
        <div class="dropdown-menu dropdown-menu-end">
          <a class="dropdown-item" href="profile.html">My profile</a>
          <a class="dropdown-item" href="account.html">Account settings</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="sign-in.html">Log out</a>
        </div>
      </div>

      <div class="collapse navbar-collapse mt-md-2" id="navbar-collapse">
        <ul class="navbar-nav" id="sidebar-nav">
          <li class="nav-item">
            <a href="/admin/panel" class="nav-link active" aria-expanded="true" aria-controls="sidebar-blogs">
              <span class="svg-icon text-primary me-2 relative-top--2">
                <i class="fa-solid fa-chart-line"></i>
              </span>
              Dashboards
            </a>
          </li>

          <li class="nav-item">
            <a href="/admin/customers" class="nav-link" aria-expanded="" aria-controls="sidebar-subs">
              <span class="svg-icon text-primary me-2 relative-top--2">
                <i class="fa-solid fa-person"></i>
              </span>
              Customers
            </a>
          </li> 

          <li class="nav-item">
            <a href="/admin/products" class="nav-link" aria-expanded="" aria-controls="sidebar-pages">
              <span class="svg-icon text-primary me-2 relative-top--2">
                <i class="fa-solid fa-shirt"></i>
              </span>
              Products
            </a>
          </li>

          <li>
            <a href="/admin/category" class="nav-link" aria-expanded="" aria-controls="sidebar-pages">
                <span class="svg-icon text-primary me-2 relative-top--2">
                  <i class="fa-solid fa-mars-double"></i>
                </span>
                Category
              </a>
          </li>

          <li class="nav-item">
            <a href="#sidebar-auth" class="nav-link" data-bs-toggle="collapse" aria-expanded="false" aria-controls="sidebar-auth">
              <span class="svg-icon text-primary me-2 relative-top--1">
                <i class="fa-solid fa-images"></i>
              </span>
              Banners
              <i class="fas fa-chevron-down fa-xs collapse-icon ms-auto"></i>
            </a>
            <div class="collapse" id="sidebar-auth" data-bs-parent="#sidebar-nav">
              <ul class="nav nav-sm flex-column fw-bold">
                <li class="nav-item">
                  <a href="/admin/main-banner" class="nav-link">
                    Main
                  </a>
                </li>
                <li class="nav-item">
                  <a href="/admin/gendered-banner" class="nav-link">
                    Gendered
                  </a>
                </li>
                <li class="nav-item">
                  <a href="/admin/instagram-banner" class="nav-link">
                    Instagram
                  </a>
                </li>
              </ul>
            </div>
          </li>
          <li>
            <a href="/admin/orders" class="nav-link" aria-expanded="" aria-controls="sidebar-pages">
                <span class="svg-icon text-primary me-2 relative-top--2">
                  <i class="fa-solid fa-truck"></i>
                </span>
                Orders
              </a>
          </li>
          <li>
            <a href="/admin/coupons" class="nav-link" aria-expanded="" aria-controls="sidebar-pages">
                <span class="svg-icon text-primary me-2 relative-top--2">
                    <i class="fa-solid fa-tag"></i>
                </span>
                Coupon
              </a>
          </li>
        </ul>

        <a href="/admin/logout" class="btn btn-light btn-sm d-none d-lg-block mt-2 mt-lg-auto mb-5 bg-transparent" style="transform: rotateY(180deg);">
          <span class="svg-icon text-primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><title>ionicons-v5-j</title><path d="M176,176V136a40,40,0,0,1,40-40H424a40,40,0,0,1,40,40V376a40,40,0,0,1-40,40H216a40,40,0,0,1-40-40V336" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/><polyline points="272 336 352 256 272 176" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/><line x1="48" y1="256" x2="336" y2="256" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/></svg>
          </span>
        </a>
      </div>
    </div>
  </nav>


  <div class="main-content">
    <div class="container-fluid mt-4 mt-md-5 mb-6">
      <div class="row">
        <div class="col-12">
          <h3 class="text-center text-md-start m-0">
            Welcome back, shas
          </h3>
        </div>

        <div class="col-12 mt-4">
          <div style="border: 2px solid rgba(18, 125, 196, 0.418);" class="card">
            <div class="card-header text-center border-bottom">
              <div class="card-header-title mb-2 mb-md-0">
                <button class="btn-sm p-1 btn-outline-primary fw-bold" onclick="downloadReport()">Download report</button>
              </div>

              <div class="w-100 w-md-250 bg-white border rounded d-flex align-items-center fs-sm fw-bold ms-md-auto py-1 px-3" role="button" data-datepicker>
                <div class="svg-icon me-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><title>ionicons-v5-e</title><rect x="48" y="80" width="416" height="384" rx="48" ry="48" style="fill:none;stroke:#000;stroke-linejoin:round;stroke-width:32px"/><path d="M397.82,80H114.18C77.69,80,48,110.15,48,147.2V208H64c0-16,16-32,32-32H416c16,0,32,16,32,32h16V147.2C464,110.15,434.31,80,397.82,80Z"/><circle cx="296" cy="232" r="24"/><circle cx="376" cy="232" r="24"/><circle cx="296" cy="312" r="24"/><circle cx="376" cy="312" r="24"/><circle cx="136" cy="312" r="24"/><circle cx="216" cy="312" r="24"/><circle cx="136" cy="392" r="24"/><circle cx="216" cy="392" r="24"/><circle cx="296" cy="392" r="24"/><line x1="128" y1="48" x2="128" y2="80" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/><line x1="384" y1="48" x2="384" y2="80" style="fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:32px"/></svg>
                </div>
                <span class="mt-1"></span>
              </div>
            </div>

            <!-- canvas -->
            <div class="card-body">
              <div class="chart">
                <canvas class="chart-canvas" id="ecommerceChart"></canvas>
              </div>
            </div>

            <!-- <div class="card-footer py-3 bg-dark">
              <div class="row row-cols-2 row-cols-md-5">
                <div class="col text-center">
                  <div class="text-uppercase-xs text-pastel-purple">
                    Total sales
                  </div>
                  <h4 class="text-white mt-1 mt-md-3 mb-0">
                    $362,201
                  </h4>
                </div>
                <div class="col text-center">
                  <div class="text-uppercase-xs text-pastel-purple">
                    Visits
                  </div>
                  <h4 class="text-white mt-1 mt-md-3 mb-0">
                    3,210
                  </h4>
                </div>
                <div class="col text-center mt-4 mt-md-0">
                  <div class="text-uppercase-xs text-pastel-purple">
                    Today's orders
                  </div>
                  <h4 class="text-white mt-1 mt-md-3 mb-0">
                    18
                  </h4>
                </div>
                <div class="col text-center mt-4 mt-md-0">
                  <div class="text-uppercase-xs text-pastel-purple">
                    Today's visitors
                  </div>
                  <h4 class="text-white mt-1 mt-md-3 mb-0">
                    891
                  </h4>
                </div>
                <div class="col text-center mt-4 mt-md-0">
                  <div class="text-uppercase-xs text-pastel-purple">
                    Avg. order value
                  </div>
                  <h4 class="text-white mt-1 mt-md-3 mb-0">
                    $247
                  </h4>
                </div>
              </div>
            </div> -->
          </div>
        </div>
      </div>
  </div>

  <!-- JAVASCRIPT
  ============================================-->

  <!-- Vendor -->
  <script src="/js/vendor.min.js"></script>


  <!-- Main Theme file -->
  <script src="/js/theme.min.js"></script>
  <script src="/js/axios.min.js"></script>


  <script type="text/javascript">
    let start, end;

    $(async function () {
      // datepicker
      async function cb(start, end) {
        $('[data-datepicker] span').html(start.format('MMM D, YYYY') + ' - ' + end.format('MMM D, YYYY'));

        try {
          const response = await axios.get('/admin/dated-orders', {params: {startDate: start.format('YYYY-MM-DD'), endDate: end.format('YYYY-MM-DD')}});
          
          if (response.status === 200) {
            updateChart(response.data);
          }
        } catch(err) {
          alert(err.response?.data?.error || err);
        }
      }

      var startDate = moment().subtract(17, 'days')
      var endDate = moment()

      $('[data-datepicker]').daterangepicker({
        startDate: startDate,
        endDate: endDate,
        opens: 'left',
        applyButtonClasses: "btn-purple",
        ranges: {
          'Today': [moment(), moment()],
          'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
          'Last 7 Days': [moment().subtract(6, 'days'), moment()],
          'Last 30 Days': [moment().subtract(29, 'days'), moment()],
          'This Month': [moment().startOf('month'), moment().endOf('month')],
          'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
        }
      }, cb)

      start = startDate;
      end = endDate;

      await cb(startDate, endDate);
    });

    let chart;

    function updateChart(data) {
        let chartCanvas = document.getElementById('ecommerceChart').getContext("2d");
        
        if (chart) {
          chart.destroy();
        }

        chart = new Chart(chartCanvas, {
          type: 'line',
          data: {
            labels: data.labels,
            datasets: [{
              label: 'Order Amount',
              data: data.values,
              backgroundColor: 'rgba(0, 123, 255, 0.2)',
              borderColor: 'rgba(0, 123, 255, 1)',
              borderWidth: 2,
              pointRadius: 0,
              lineTension: 0.2
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            legend: {
              display: false
            },
            scales: {
              x: {
                display: true,
                title: {
                  display: true,
                  text: 'Date'
                }
              },
              y: {
                display: true,
                title: {
                  display: true,
                  text: 'Amount'
                }
              }
            }
          }
        });
    }

    async function downloadReport() {
      try {
        const response = await axios.post('/admin/download-sales-report', {start, end}, {responseType: 'arraybuffer'}, {
          headers: {
            'Content-Type': 'application/json'
          }
        });
        const blob = new Blob([response.data], { type: 'application/pdf' });

        const link = document.createElement("a");
        link.href = window.URL.createObjectURL(blob);
        link.setAttribute("download", "sales_report.pdf");
        link.click();

      } catch(err) {
        alert(err.response?.data?.error || err);
      }
    }
    
  </script>
</body>
</html>
